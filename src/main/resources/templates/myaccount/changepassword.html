<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:insert="fragment/head :: head"></head>
<body class="blue-background">
<div th:insert="fragment/header :: header"></div>
<section class="white-background">
    <div class="container pt-4 pb-4">
        <div class="row justify-content-center" id="content-body">
            <div class="background-content col-lg-3 col-md-12 col-sm-12 mr-3 pt-5 smaller-font profile-left"
                 th:include="fragment/profile :: profile"></div>
            <div class="background-content col-lg-8 col-md-12 col-sm-12 p-5 smaller-font profile-right"
                 id="content-body-right">
                <h2 class="text-center pt-4" style="color: #60a6e4">Change CRF™ Account Password</h2>
                <hr>
                <p class="space-document">Thank you for choosing CRF™ system. You can now change System™ account
                    password.</p>
                <div class="container">
                    <div class="row justify-content-center">
                        <form class="col-lg-11 col-md-11 col-sm-11" onsubmit="return checkPass()" th:object="${user}">
                            <input name="email" th:value="${email}" type="hidden">
                            <div><b>Current Password:</b><br>
                                <input class="width-252 mb-3 p-1" id="password" name="password"
                                       pattern="[a-zA-z0-9!@#$%^&]{6-20}"
                                       required title="Password in 6-20 char!" type="password"/></br>
                            </div>
                            <div><b>New Password:</b><br>
                                <input class="width-252 mb-3 p-1" id="newpassword" name="newPassword"
                                       pattern="[a-zA-z0-9!@#$%^&]{6-20}"
                                       required title="Password in 6-20 char!" type="password"/></br>
                            </div>
                            <div><b>Confirm Password:</b><br>
                                <input class="width-252 mb-3 p-1" id="retypepassword" name="retypePassword"
                                       pattern="[a-zA-z0-9!@#$%^&]{6-20}"
                                       required title="Password in 6-20 char!" type="password"/></br>
                            </div>
                            <div class="mb-1"><b>Captcha Validate:</b></div>
                            <div th:insert="fragment/recaptcha :: recaptcha"></div>
                            <hr>
                            <div class="text-center">
                                <button class="btn btn-primary mt-2 mr-2" formaction="/my-account/changed-password"
                                        formmethod="post" onclick="return validatedCaptcha()" role="button">Change
                                    Password
                                </button>
                                <a class=" btn btn-primary mt-2 a-block" href="/my-account" role="button">Cancel</a>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div th:insert="fragment/footer :: footer"></div>
<span th:if="${message != null}">
    <script th:inline="javascript">
        /*<![CDATA[*/
        let sms = /*[[${message}]]*/ 'default';
        window.alert(sms);
        /*]]>*/
    </script>
</span>
<script>
    function checkPass() {
        let pass = $("#newPassword").val();
        let rePass = $("#retypePassword").val();
        if (pass != rePass) {
            alert("Password not match!");
            return false;
        } else {
            return true;
        }
    }
</script>
</body>
</html>
